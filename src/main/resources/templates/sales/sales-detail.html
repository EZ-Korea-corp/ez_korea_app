<!DOCTYPE html>
<html lang="ko"
      class="no-js"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns="http://www.w3.org/1999/html">

<body>

    <main layout:fragment="main">
        <style>
            .icon {
                display: inline-block;
                vertical-align: middle;
            }
            button{
                color: #FFFFFF;
            }
            #accountInfo {
                transform: rotate(90deg);
                transform-origin: center center;
            }
        </style>
        <div class="lg:space-x-12">

            <div class="lg:w-full card" id="select-div">

                <div class="p-10 pt-4">
                    <div class="md:py-8 py-3">
                        <h2 class="text-xl font-bold"> <span th:text="${map.table.getMember().getName()}"></span>ÎãòÏùò ÏùºÏùº ÌåêÎß§ ÌòÑÌô©</h2>
                        <p class="font-medium mt-1.5 text-base" th:text="|[${T(com.ezkorea.hybrid_app.domain.timetable.PartTime).of(map.table.getPart())}] ${#calendars.format(#calendars.createNow(), 'yyyyÎÖÑ MMÏõî ddÏùº')}|"></p>

                        <div class="flex-1 space-y-4 md:mt-0 mt-6 text-sm font-medium">
                            <a th:href="@{|/sales/sell/${map.tTid}|}" class="bg-blue-600 text-white py-2.5 text-center font-semibold w-full mt-4 block rounded hover:text-white"> ÌåêÎß§ÌïòÍ∏∞ </a>
                            <a th:href="@{|/sales/close/${map.tTid}|}" class="bg-purple-600 text-white py-2.5 text-center font-semibold w-full mt-4 block rounded hover:text-white"> ÎßàÍ∞êÌïòÍ∏∞ </a>
                            <button class="bg-purple-600 text-white py-2.5 text-center font-semibold w-full mt-4 block rounded hover:text-white" type="button" uk-toggle="target: #modal">Í≥ÑÏ¢å Ï†ïÎ≥¥</button>

                            <!-- This is the modal with the default close button -->
                            <div id="modal" uk-modal>
                                <div class="uk-modal-dialog uk-modal-body rounded-md shadow-2xl">
                                    <button class="uk-modal-close-default bg-gray-300 p-2 rounded-full m-3" type="button" uk-close></button>
                                    <!-- component -->
                                    <div class="min-h-screen flex justify-center items-center">
                                        <div id="accountInfo" class="space-y-16">
                                            <div class="w-96 h-48 m-auto bg-red-100 rounded-xl relative text-white shadow-2xl transition-transform transform hover:scale-110">

                                                <img class="relative object-cover w-full h-full rounded-xl" src="https://i.imgur.com/Zi6v09P.png">
                                                <!-- ÌååÎûÄ Î∞∞Í≤Ω
                                                <img class="relative object-cover w-full h-full rounded-xl" src="https://i.imgur.com/kGkSg1v.png">
                                                -->

                                                <div class="w-full px-8 absolute top-8">
                                                    <div class="flex justify-between">
                                                        <div class="">
                                                            <p class="font-light">
                                                                Í≥ÑÏ¢åÎ™Ö
                                                            <p class="text-xl tracking-widest">
                                                                ÎÇ®Î™ÖÏõê
                                                            </p>
                                                        </div>
                                                        <img class="w-14 h-14" src="https://ifh.cc/g/RSfW66.png"/>
                                                    </div>
                                                    <div class="pt-2">
                                                        <p class="font-light">
                                                            Í≥ÑÏ¢å Î≤àÌò∏
                                                            </h1>
                                                        <p class="text-xl tracking-more-wider">
                                                            010<a class="mx-4">-</a>8181<a class="mx-4">-</a>5587
                                                        </p>
                                                    </div>
                                                    <!--<div class="pt-6 pr-6">
                                                        <div class="flex justify-between">
                                                            <div class="">
                                                                <p class="font-light text-xs">
                                                                    Valid
                                                                    </h1>
                                                                <p class="font-medium tracking-wider text-sm">
                                                                    00/00
                                                                </p>
                                                            </div>
                                                            <div class="">
                                                                <p class="font-light text-xs text-xs">
                                                                    Expiry
                                                                    </h1>
                                                                <p class="font-medium tracking-wider text-sm">
                                                                    00/00
                                                                </p>
                                                            </div>

                                                            <div class="">
                                                                <p class="font-light text-xs">
                                                                    CVV
                                                                    </h1>
                                                                <p class="font-bold tracking-more-wider text-sm">
                                                                    123
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>-->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">

                    <div class="md:py-8 py-3">
                        <div>
                            <h1 class="block text-lg font-bold mb-4"> Ï£ºÏú†ÏÜå Ï†ïÎ≥¥  </h1>
                            <div class="md:flex">
                                <div class="md:w-2/3 space-y-4 -mt-2">
                                    <div class="flex items-center space-x-3">
                                        <div class="p-1.5 rounded-full text-2xl">‚õΩÔ∏è</div>
                                        <div class="flex-1">
                                            <div>
                                                <span class="text-xl font-semibold" th:text="${map.table.getGasStation().getStationName()}"> Ï£ºÏú†ÏÜå Ïù¥Î¶Ñ </span>
                                            </div>
                                            <p th:text="${map.table.getGasStation().getStationLocation()}"></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <div class="flex justify-content-between">
                                        <h1 class="block text-lg font-bold mb-4"> Í≥µÏßÄÏÇ¨Ìï≠  </h1>
                                        <th:block th:if="${map.table.getGasStation().getImageList() != 0}">
                                            <p uk-toggle="target: #imgModal" class="text-blue-500 underline hover:text-white">Í≥µÏßÄ ÏÇ¨ÏßÑ</p>

                                            <!-- This is the modal with the default close button -->
                                            <div id="imgModal" uk-modal>
                                                <div class="uk-modal-dialog uk-modal-body rounded-md shadow-2xl">
                                                    <button class="uk-modal-close-default bg-gray-300 p-2 rounded-full m-3" type="button" uk-close></button>
                                                    <h2 class="mb-2 uk-modal-title">Í≥µÏßÄ ÏÇ¨ÏßÑ</h2>
                                                    <div id="imageRefreshForm" class="imageRefreshForm mb-4">
                                                        <div class="uk-container mt-4" uk-slider>
                                                            <div class="uk-position-relative uk-visible-toggle uk-light">
                                                                <div uk-lightbox="animation: slide" class="uk-slider-items uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-4@m">
                                                                    <div th:each="image : ${map.table.getGasStation().getImageList()}">
                                                                        <a th:href="${image.getFilePath()}" data-fancybox="gallery">
                                                                            <img class="rounded" style="width: 200px; height: 150px;"
                                                                                 th:src="${image.getFilePath()}"/>
                                                                        </a>
                                                                    </div>
                                                                </div>
                                                                <a class="uk-position-center-left uk-position-small uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
                                                                <a class="uk-position-center-right uk-position-small uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </th:block>
                                    </div>
                                    <div class="md:w-2/3 space-y-4 -mt-2">
                                        <div class="md:flex">
                                            <div class="items-center space-x-3">
                                                <div>
                                                    <div id="content" th:text="${map.table.getGasStation().getMemo()}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <hr class="my-8">
                        <div>
                            <h1 class="block text-lg font-bold my-4"> Í∞úÎ≥Ñ ÌåêÎß§Í∏àÏï°  </h1>
                            <div class="flex items-center space-x-3">
                                <div class="p-1.5 rounded-full text-2xl">üíµ</div>
                                <div class="flex-1">
                                    <div><span class="text-lg font-semibold" th:text="|Ïπ¥Îìú : ${#numbers.formatInteger(map.card, 0, 'COMMA')}Ïõê|"></span> </div>
                                    <div><span class="text-lg font-semibold" th:text="|ÌòÑÍ∏à : ${#numbers.formatInteger(map.cash, 0, 'COMMA')}Ïõê|"></span> </div>
                                    <div><span class="text-lg font-semibold" th:text="|Ï¥ùÍ≥Ñ : ${#numbers.formatInteger(map.card + map.cash, 0, 'COMMA')}Ïõê|"></span> </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h1 class="block text-lg font-bold my-4"> Í∞úÎ≥Ñ ÌåêÎß§ÏàòÎüâ  </h1>
                            <div class="relative overflow-x-auto shadow-md">

                                <table class="w-full text-sm text-left text-gray-500 live-search-table">
                                    <thead class="whitespace-nowrap uk-text-center text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Ï¢ÖÎ•ò
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Í≤∞Ï†ú
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Í∞úÏàò
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            ÎπÑÍ≥†
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:if="${map.sellList.size() > 0}" th:each="sell : ${map.sellList}" class="whitespace-nowrap border-b border-gray-200">
                                        <th scope="row" th:text="${sell.name}" class="px-6 py-4 font-medium whitespace-nowrap bg-gray-50">
                                        </th>
                                        <td class="px-6 py-4" th:text="${sell.payment}"></td>
                                        <td class="px-6 py-4" th:text="|${sell.count * 0.5}Í∞ú|"></td>
                                        <td th:if="${sell.name != 'Ï¥ùÍ≥Ñ'}" class="uk-text-center">
                                            <button type="button" th:onclick="fnDeleteSale(this.getAttribute('id'))" th:id="${sell.id}" class="bg-blue-600 justify-center h-9 px-2 rounded-md border font-semibold"> ÏÇ≠Ï†ú </button>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <th:block th:if="${map.fixList.size() > 0}">
                            <h1 class="block text-lg font-bold my-4"> Î∂àÎüâ ÌòÑÌô©  </h1>
                            <div class="flex items-center space-x-3">
                                <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            Ï¢ÖÎ•ò
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            Î©îÎ™®
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            ÎπÑÍ≥†
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="fix : ${map.fixList}" class="border-b border-gray-200 dark:border-gray-700">
                                        <th scope="row" th:text="${fix.name}" class="px-6 py-4 font-medium whitespace-nowrap">
                                        </th>
                                        <td class="px-6 py-4" th:text="|${fix.memo}|"></td>
                                        <td>
                                            <button type="button" th:onclick="fnDeleteSale(this.getAttribute('id'))" th:id="${fix.id}" class="bg-blue-600 justify-center h-9 px-2 rounded-md border font-semibold"> ÏÇ≠Ï†ú </button>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </th:block>
                    </div>
                </div>
            </div>
        </div>
        <script>
            jQuery(document).ready(function($){

                let content = $('#content').text();
                let html = content.replace(/\n/g, '<br>');
                $('#content').html(html);

            });
            function fnDeleteSale(id) {
                Swal.fire({
                    html: 'ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?',
                    showDenyButton: true,
                    confirmButtonText: 'ÏÇ≠Ï†ú',
                    denyButtonText: `Ï∑®ÏÜå`,
                }).then((result) => {
                    if(result.isConfirmed){
                        fnCrudRefreshAjax({"id" : id}, '/sales/delete', 'select-div', 'DELETE');
                    }
                })
            }
        </script>
    </main>

</body>

</html>