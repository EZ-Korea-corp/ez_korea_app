<!DOCTYPE html>
<html lang="ko"
      class="no-js"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns="http://www.w3.org/1999/html">

<body>

    <main layout:fragment="main">
        <style>
            .icon {
                display: inline-block;
                vertical-align: middle;
            }
            button{
                color: #FFFFFF;
            }
        </style>
        <div class="lg:space-x-12">

            <div class="lg:w-full card" id="select-div">

                <div class="p-10 pt-4 divide-y divide-gray-100">

                    <div class="md:py-8 py-3">
                        <h2 class="text-xl font-bold"> <span th:text="${map.table.getMember().getName()}"></span>ÎãòÏùò ÏùºÏùº ÌåêÎß§ ÌòÑÌô©</h2>
                        <p class="font-medium mt-1.5 text-base" th:text="|[${T(com.ezkorea.hybrid_app.domain.timetable.PartTime).of(map.table.getPart())}] ${#calendars.format(#calendars.createNow(), 'yyyyÎÖÑ MMÏõî ddÏùº')}|"></p>

                        <div class="flex-1 space-y-4 md:mt-0 mt-6 text-sm font-medium">
                            <a th:href="@{|/sales/sell/${map.tTid}|}" class="bg-blue-600 text-white py-2.5 text-center font-semibold w-full mt-4 block rounded hover:text-white"> ÌåêÎß§ÌïòÍ∏∞ </a>
                            <a th:href="@{|/sales/close/${map.tTid}|}" class="bg-purple-600 text-white py-2.5 text-center font-semibold w-full mt-4 block rounded hover:text-white"> ÎßàÍ∞êÌïòÍ∏∞ </a>
                        </div>
                    </div>

                    <div class="md:py-8 py-3">

                        <h1 class="block text-lg font-bold mb-9"> ÌåêÎß§ ÏÉÅÏÑ∏  </h1>
                        <div class="md:flex">
                            <div class="md:w-2/3 space-y-4 -mt-2">
                                <div class="flex items-center space-x-3">
                                    <div class="p-1.5 rounded-full text-2xl">‚õΩÔ∏è</div>
                                    <div class="flex-1">
                                        <div>
                                            <span class="text-xl font-semibold" th:text="${map.table.getGasStation().getStationName()}"> Ï£ºÏú†ÏÜå Ïù¥Î¶Ñ </span>
                                        </div>
                                        <p th:text="${map.table.getGasStation().getStationLocation()}"></p>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="p-1.5 rounded-full text-2xl">üíµ</div>
                                    <div class="flex-1">
                                        <div><span class="text-lg font-semibold" th:text="|Ïπ¥Îìú : ${#numbers.formatInteger(map.card, 0, 'COMMA')}Ïõê|"></span> </div>
                                        <div><span class="text-lg font-semibold" th:text="|ÌòÑÍ∏à : ${#numbers.formatInteger(map.cash, 0, 'COMMA')}Ïõê|"></span> </div>
                                        <div><span class="text-lg font-semibold" th:text="|Ï¥ùÍ≥Ñ : ${#numbers.formatInteger(map.card + map.cash, 0, 'COMMA')}Ïõê|"></span> </div>
                                    </div>
                                </div>

                                <h1 class="block text-lg font-bold mb-9"> ÌåêÎß§ ÌòÑÌô©  </h1>
                                <div class="flex items-center space-x-3">
                                    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                        <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                            <tr>
                                                <th scope="col" class="px-6 py-3">
                                                    Ï¢ÖÎ•ò
                                                </th>
                                                <th scope="col" class="px-6 py-3">
                                                    Í∞úÏàò
                                                </th>
                                                <th scope="col" class="px-6 py-3">
                                                    ÎπÑÍ≥†
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr th:if="${map.sellList.size() > 0}" th:each="sell : ${map.sellList}" class="border-b border-gray-200 dark:border-gray-700">
                                                <th scope="row" th:text="${sell.name}" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap bg-gray-50 dark:text-white dark:bg-gray-800">
                                                </th>
                                                <td class="px-6 py-4" th:text="|${sell.count * 0.5}Í∞ú|"></td>
                                                <td th:if="${sell.name != 'Ï¥ùÍ≥Ñ'}">
                                                    <button type="button" th:onclick="fnDeleteSale(this.getAttribute('id'))" th:id="${sell.id}" class="bg-blue-600 justify-center h-9 px-2 rounded-md border font-semibold"> ÏÇ≠Ï†ú </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <th:block th:if="${map.fixList.size() > 0}">
                                    <h1 class="block text-lg font-bold mb-9"> Í≥†Ïû• ÌòÑÌô©  </h1>
                                    <div class="flex items-center space-x-3">
                                        <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                            <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                            <tr>
                                                <th scope="col" class="px-6 py-3">
                                                    Ï¢ÖÎ•ò
                                                </th>
                                                <th scope="col" class="px-6 py-3">
                                                    Î©îÎ™®
                                                </th>
                                                <th scope="col" class="px-6 py-3">
                                                    ÎπÑÍ≥†
                                                </th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr th:each="fix : ${map.fixList}" class="border-b border-gray-200 dark:border-gray-700">
                                                <th scope="row" th:text="${fix.name}" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap bg-gray-50 dark:text-white dark:bg-gray-800">
                                                </th>
                                                <td class="px-6 py-4" th:text="|${fix.memo}|"></td>
                                                <td>
                                                    <button type="button" th:onclick="fnDeleteSale(this.getAttribute('id'))" th:id="${fix.id}" class="bg-blue-600 justify-center h-9 px-2 rounded-md border font-semibold"> ÏÇ≠Ï†ú </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </th:block>

                        </div>
                    </div>

                </div>

            </div>

        </div>
        <script>
            function fnDeleteSale(id) {
                Swal.fire({
                    html: 'ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?',
                    showDenyButton: true,
                    confirmButtonText: 'ÏÇ≠Ï†ú',
                    denyButtonText: `Ï∑®ÏÜå`,
                }).then((result) => {
                    if(result.isConfirmed){
                        fnCrudRefreshAjax({"id" : id}, '/sales/delete', 'select-div', 'DELETE');
                    }
                })
            }
        </script>
    </main>

</body>

</html>